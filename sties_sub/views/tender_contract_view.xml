<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="form_view_contract_tender" model="ir.ui.view">
            <field name="name">tender.contract.form</field>
            <field name="model">tender.contract</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <form string="contrats" class="o_opportunity_form">
                    <header>
                        <button name="action_confirm" string="Confirm" type="object" class="oe_highlight"
                                states="draft"/>
                        <button name="action_running" string="Démarrer" type="object" class="oe_highlight"
                                states="confirmed"/>

                        <button string="Nouvelle commande" name="%(sale_action_quotations_new_from_contract)d"
                                type="action" class="oe_highlight"
                                attrs="{'invisible': ['|', ('state', '!=', 'running'), ('blocked', '=', True)]}"
                                context="{'search_default_partner_id': partner_id,
                                  'default_partner_id': partner_id,
                                  'default_origin': name,
                                  'default_lead_tender_id': lead_id}"/>


                        <button name="action_done" string="Clôturer" type="object" class="oe_highlight"
                                states="running"/>
                        <button name="action_suspended" string="Suspendre" type="object" class="oe_highlight"
                                states="running"/>
                        <button name="action_cancel" string="Annuler" type="object" states="draft,confirmed"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <field name="active" invisible="1"/>
                        <field name="blocked" invisible="1"/>

                        <div class="oe_title">
                            <h1>
                                <field name="name" nolabel="1" readonly="1" placeholder="N° contrat"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="partner_id" readonly="1"
                                       widget="res_partner_many2one"
                                       string="Client" domain="[('customer', '=', True)]"
                                       context="{'search_default_customer': 1,
                                        'show_vat': True,
                                    }"/>
                                <field name="company_id"/>
                                <field name="begin_date" readonly="1"/>
                                <field name="lead_id" readonly="1"/>
                            </group>
                            <group>
                                <field name="pricelist_id" readonly="1"/>
                                <field name="end_date" readonly="1"/>
                                <field name="signed_date" readonly="1"/>
                            </group>
                            <group>
                                <field name="currency_id" invisible="1"/>
                                <field name="contract_length" readonly="1"/>
                                <field name="user_id" string="Vendeur" readonly="1"/>
                            </group>
                        </group>
                        <notebook colspan="4">
                            <page string="Participations" name="contract_lines">
                                <field
                                        name="contract_lines" readonly="1"
                                        widget="section_and_note_one2many"
                                        mode="tree">
                                    <form>
                                        <group>
                                            <group>
                                                <field name="product_id"
                                                       context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                                       force_save="1"
                                                />
                                                <field name="price_total" invisible="1"/>
                                                <field name="price_tax" invisible="1"/>
                                                <field name="price_subtotal" invisible="1"/>
                                                <label for="product_uom_qty" string="Qté du contrat"/>
                                                <div>
                                                    <field
                                                            context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}"
                                                            name="product_uom_qty" class="oe_inline"/>
                                                    <field
                                                            name="product_uom"
                                                            force_save="1"
                                                            groups="uom.group_uom"
                                                            class="oe_inline oe_no_button"
                                                            attrs="{'readonly': [('state', 'in', ('sale', 'done', 'cancel'))]}"
                                                    />
                                                </div>
                                                <label for="qty_delivered" string="Delivered Quantity"
                                                       attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                                <div attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}">
                                                    <field name="qty_delivered"/>
                                                    <field
                                                            name="product_uom"
                                                            force_save="1"
                                                            groups="uom.group_uom"
                                                            class="oe_inline oe_no_button"
                                                            attrs="{'readonly': [('state', 'in', ('sale', 'done', 'cancel'))]}"
                                                    />
                                                </div>

                                                <label for="qty_invoiced" string="Qté facturée"
                                                       attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                                <div attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}">
                                                    <field name="qty_invoiced"/>
                                                    <field
                                                            name="product_uom"
                                                            force_save="1"
                                                            groups="uom.group_uom"
                                                            class="oe_inline oe_no_button"
                                                            attrs="{'readonly': [('state', 'in', ('sale', 'done', 'cancel'))]}"
                                                    />
                                                </div>
                                            </group>
                                            <group>

                                                <field name="invoicing"/>
                                                <field name="pattern_not_invoicing"
                                                       attrs="{'required': [('invoicing', '=', 'do_not_invoice')],'readonly': [('invoicing', '=', 'to_invoice')], 'invisible': [('invoicing', '=', 'to_invoice')]}"/>

                                                <field name="is_reactif_dedie"
                                                       attrs="{'invisible': [('is_reactif_dedie', '=', False)]}"
                                                       readonly="0"/>
                                                <field name="is_reactif_manuel"
                                                       attrs="{'invisible': [('is_reactif_manuel', '=', False)]}"
                                                       readonly="0"/>
                                                <field name="standard_ids" widget="many2many_tags"
                                                       attrs="{'invisible': [('is_reactif_dedie', '=', False),('is_reactif_manuel', '=', False)]}"
                                                       readonly="1"/>


                                                <field name="tax_id"
                                                       widget="many2many_tags"
                                                       options="{'no_create': True}"
                                                       context="{'search_view_ref': 'account.account_tax_view_search'}"
                                                       domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                                />

                                                <field name="price_unit"/>
                                                <label for="discount" groups="sale.group_discount_per_so_line"/>
                                                <div name="discount" groups="sale.group_discount_per_so_line">
                                                    <field name="discount" class="oe_inline"/>
                                                    %%
                                                </div>

                                                <field
                                                        name="subtotal_invoiced" string="Montant facturé"
                                                        attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                                />
                                                <field
                                                        name="subtotal_to_invoice" string="Montant à facturer"
                                                        attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                                />
                                                <field
                                                        name="subtotal_encours" string="Montant des encours"
                                                        attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                                />

                                                <label for="percentage_of_target"
                                                       attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                                <div name="percentage_of_target"
                                                     attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}">
                                                    <field name="percentage_of_target" class="oe_inline"/>
                                                    %%
                                                </div>
                                            </group>
                                        </group>
                                        <field name="name" invisible="1"/>
                                        <field name="state" invisible="1"/>
                                    </form>
                                    <tree string="Tenders Lines">
                                        <field
                                                name="product_id"
                                                force_save="1"
                                                context="{
                                                'partner_id': parent.partner_id,
                                                'quantity': product_uom_qty,
                                                'pricelist': parent.pricelist_id, 
                                                'uom':product_uom,
                                                'company_id': parent.company_id,
                                                'default_lst_price': price_unit,
                                                'default_description_sale': name
                                            }"
                                        />
                                        <field name="name" widget="section_and_note_text" invisible="1"/>
                                        <field
                                                name="product_uom_qty"
                                                string="Qté du contrat"
                                                context="{
                                                'partner_id': parent.partner_id,
                                                'quantity': product_uom_qty,
                                                'pricelist': parent.pricelist_id,
                                                'uom': product_uom,
                                                'company_id': parent.company_id
                                            }"
                                        />
                                        <field name="won_uom_qty"
                                               attrs="{'column_invisible': [('parent.state', 'not in', ['won', 'partial_won'])]}"/>
                                        <field
                                                name="qty_delivered"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field
                                                name="qty_invoiced" string="Qté facturée"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field
                                                name="product_uom" string="UDM"
                                                force_save="1"
                                                attrs="{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}"
                                                context="{'company_id': parent.company_id}"
                                                groups="uom.group_uom"
                                                options='{"no_open": True}'
                                        />
                                        <field name="invoicing"/>
                                        <field name="pattern_not_invoicing" string="Motif de FAC NA"/>
                                        <field name="price_unit" string="PU"/>
                                        <field
                                                name="subtotal_invoiced" string="M. facturé"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field
                                                name="subtotal_to_invoice" string="M. à facturer"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field
                                                name="subtotal_encours" string="M. encours"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field
                                                name="percentage_of_target" string="Pourcent / Obj(%)"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />


                                        <field
                                                name="tax_id"
                                                widget="many2many_tags"
                                                options="{'no_create': True}"
                                                domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                        />
                                        <field name="discount" groups="sale.group_discount_per_so_line"/>
                                        <field name="price_subtotal" widget="monetary"
                                               groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <field name="price_total" widget="monetary"
                                               groups="account.group_show_line_subtotals_tax_included"/>
                                        <field name="currency_id" invisible="1"/>
                                        <field name="price_tax" invisible="1"/>
                                        <field name="state" invisible="1"/>
                                    </tree>
                                </field>
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                    <field name="amount_untaxed" widget='monetary'
                                           options="{'currency_field': 'currency_id'}"/>
                                    <field name="amount_tax" widget='monetary'
                                           options="{'currency_field': 'currency_id'}"/>
                                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                        <label for="amount_total"/>
                                    </div>
                                    <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator"
                                           widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                </group>
                                <div class="oe_clear"/>

                            </page>
                            <page string="Bons de commandes">
                                <button name="%(link_sales_order_view_action)d"
                                        string="Lier des commandes au contrat"
                                        type="action"
                                        class="oe_highlight"
                                        attrs="{'invisible': [('state', '!=', 'running')]}"
                                        context="{'contract_number': name, 'search_default_partner_id': partner_id,
                                        'default_partner_id': partner_id}"
                                        groups="sties_sub.group_tender_manager"
                                />
                                <field name="order_ids" widget="section_and_note_one2many" mode="tree">
                                    <tree string="Bons de commandes"
                                          decoration-info="invoice_status == 'to invoice'"
                                          decoration-warning="invoice_status == 'do_not_invoice'"
                                          decoration-success="invoice_status == 'invoiced'"
                                          decoration-muted="state=='cancel'">
                                        <field name="name" string="Numéro"/>
                                        <field name="confirmation_date" string="Confirmation Date"/>
                                        <field name="commitment_date" groups="sale.group_sale_order_dates"/>
                                        <field name="invoice_status"/>
                                        <field name="state" invisible="1"/>
                                        <field name="amount_total" sum="Total Tax Included" widget="monetary"/>
                                        <field name="currency_id" invisible="1"/>
                                        <!-- <field name="amount_to_invoice" sum="A facturer" widget="monetary"/> -->
                                    </tree>
                                </field>
                            </page>
                            <page string="Factures">
                                <field name="invoice_ids" widget="section_and_note_one2many" mode="tree">
                                    <tree decoration-info="state == 'draft'"
                                          decoration-muted="state == 'cancel'"
                                          string="Factures">
                                        <field name="number"/>
                                        <field name="date_invoice"/>
                                        <field name="date_due"/>
                                        <field name="origin"/>
                                        <field name="state"/>
                                        <!-- <field name="coffre_payment"  invisible="1"/> -->
                                        <!-- <field name="payment_state"/> -->
                                        <field name="amount_untaxed_invoice_signed" string="Tax Excluded" sum="Total"/>
                                        <field name="amount_tax_signed" string="Tax" sum="Total"/>
                                        <field name="amount_total_signed" string="Total" sum="Total"/>
                                        <field name="residual_signed" string="Amount Due" sum="Amount Due"/>
                                        <field name="currency_id" invisible="1"/>
                                        <field name="company_currency_id" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Vente hors contrat" name="contract_extra_lines">
                                <button name="action_generate_extra_lines" string="Mettre à jour" type="object"
                                        class="btn-primary" groups="sties_sub.group_tender_user"/>
                                <field
                                        name="contract_extra_lines"
                                        widget="section_and_note_one2many"
                                        mode="tree">
                                    <form>
                                        <!-- <field name="sequence" invisible="1"/> -->
                                        <group>
                                            <group>
                                                <field name="order_id"/>
                                            </group>
                                            <group>
                                            </group>
                                            <group>
                                                <field name="product_id"/>
                                                <field name="price_total" invisible="1"/>
                                                <field name="price_tax" invisible="1"/>
                                                <field name="price_subtotal" invisible="1"/>
                                                <label for="product_uom_qty" string="Qté commandée"/>
                                                <div>
                                                    <field
                                                            context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}"
                                                            name="product_uom_qty" class="oe_inline"/>
                                                    <field name="product_uom" force_save="1" groups="uom.group_uom"
                                                           class="oe_inline oe_no_button"/>
                                                </div>
                                                <label for="qty_delivered" string="Delivered Quantity"
                                                       attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                                <div attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}">
                                                    <field name="qty_delivered"/>
                                                    <field name="product_uom" force_save="1" groups="uom.group_uom"
                                                           class="oe_inline oe_no_button"/>
                                                </div>
                                                <label for="qty_invoiced" string="Qté facturée"
                                                       attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                                <div attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}">
                                                    <field name="qty_invoiced"
                                                           attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                                    <field name="product_uom" force_save="1" groups="uom.group_uom"
                                                           class="oe_inline oe_no_button"/>
                                                </div>
                                                <!-- <field name="price_unit"/>
                                                <label for="discount" groups="sale.group_discount_per_so_line"/>
                                                <div name="discount" groups="sale.group_discount_per_so_line">
                                                    <field name="discount" class="oe_inline"/> %%
                                                </div> -->


                                            </group>
                                            <group>
                                                <field name="tax_id" widget="many2many_tags"
                                                       options="{'no_create': True}"
                                                       context="{'search_view_ref': 'account.account_tax_view_search'}"
                                                       domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"/>
                                                <field name="price_unit"/>
                                                <label for="discount" groups="sale.group_discount_per_so_line"/>
                                                <div name="discount" groups="sale.group_discount_per_so_line">
                                                    <field name="discount" class="oe_inline"/>
                                                    %%
                                                </div>

                                                <field
                                                        name="untaxed_amount_invoiced" string="Montant facturé"
                                                        attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                                />
                                                <field
                                                        name="untaxed_amount_to_invoice" string="Montant à facturer"
                                                        attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                                />
                                                <field
                                                        name="subtotal_encours" string="Montant des encours"
                                                        attrs="{'invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                                />
                                            </group>
                                        </group>
                                    </form>
                                    <tree string="Lignes">
                                        <field name="order_id" string="BC"/>
                                        <field name="sequence" widget="handle"/>
                                        <field name="product_id"/>
                                        <field name="product_uom_qty" string="Qté commandée"/>
                                        <field name="qty_delivered"
                                               attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                        <field name="qty_invoiced" string="Qté facturée"
                                               attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"/>
                                        <field name="product_uom" force_save="1" string="UDM" groups="uom.group_uom"/>
                                        <field name="price_unit"/>
                                        <field
                                                name="untaxed_amount_invoiced" string="M. facturé"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field
                                                name="untaxed_amount_to_invoice" string="M. à facturer"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field
                                                name="subtotal_encours" string="M. encours"
                                                attrs="{'column_invisible': [('parent.state', 'not in', ['running', 'done','suspended'])]}"
                                        />
                                        <field name="tax_id" widget="many2many_tags"/>
                                        <field name="discount" groups="sale.group_discount_per_so_line"/>
                                        <field name="price_subtotal" sum="price_subtotal" widget="monetary"
                                               groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <field name="price_tax" sum="price_tax" string="Total taxes" widget="monetary"/>
                                        <field name="price_total" sum="price_total" widget="monetary"/>
                                        <field name="currency_id" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Suivi contrat">
                                <group>
                                    <group string="Total du contrat">
                                        <field name="amount_total" string="Total contrat"
                                               class="oe_subtotal_footer_separator" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                    </group>
                                    <group string="Vente sous contrat">
                                        <field name="amount_total_contract_invoiced"
                                               class="oe_subtotal_footer_separator" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="amount_total_contract_to_invoice"
                                               class="oe_subtotal_footer_separator" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="amount_total_contract_follow" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <label for="percentage_of_target"/>
                                        <div name="percentage_of_target">
                                            <field name="percentage_of_target" class="oe_inline"/>
                                            %%
                                        </div>
                                    </group>
                                    <group string="Ventes hors contrat">
                                        <field name="amount_total_hors_contract_invoiced" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="amount_total_hors_contract_to_invoice" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="amount_total_hors_contract_follow" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                    </group>
                                    <group string="Toutes les ventes">
                                        <field name="amount_total_invoiced" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="amount_total_to_invoice" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="amount_total_follow" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <label for="global_percentage_of_target"/>
                                        <div name="global_percentage_of_target">
                                            <field name="global_percentage_of_target" class="oe_inline"/>
                                            %%
                                        </div>
                                    </group>
                                </group>
                            </page>
                            <page string="Internal Notes">
                                <field name="description"/>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="tree_view_contract_tender" model="ir.ui.view">
            <field name="name">tender.contract.tree</field>
            <field name="model">tender.contract</field>
            <field name="arch" type="xml">
                <tree string="Contracts"
                      decoration-info="state=='confirmed'"
                      decoration-bf="state=='running'"
                      decoration-success="state=='done'"
                      decoration-muted="state == 'cancel'"
                      decoration-danger="state == 'suspended'">
                    <field name="name" string="Contract"/>
                    <field name="partner_id"/>
                    <field name="lead_id" string="Appel d'offre"/>
                    <field name="begin_date"/>
                    <field name="end_date"/>
                    <field name="signed_date"/>
                    <field name="user_id"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="amount_total" widget="monetary"/>
                    <field name="global_percentage_of_target"/>
                    <field name="state"/>

                </tree>
            </field>
        </record>

        <record id="view_sale_contract_tenders_filter" model="ir.ui.view">
            <field name="name">tender.contract.search</field>
            <field name="model">tender.contract</field>
            <field name="arch" type="xml">
                <search string="Search Leads">
                    <field name="name" filter_domain="[('name', 'ilike', self)]"/>
                    <field name="user_id"/>
                    <field name="partner_id" operator="child_of" string="Customer"/>
                    <separator/>
                    <filter string="En cours" name="running" domain="[('state', '=', 'running')]"/>
                    <filter string="Confirmé" name="confirmed" domain="[('state', '=', 'confirmed')]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Client" name="customer" context="{'group_by':'partner_id'}"/>
                        <filter string="Appel d'offre" name="tender" context="{'group_by':'lead_id'}"/>
                        <filter name="Statut" string="State" context="{'group_by':'state'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Date début" name="begin_date" context="{'group_by':'begin_date'}"/>
                        <filter string="Date fin" name="end_date" context="{'group_by':'end_date'}"/>
                        <filter string="Date de signature" name="signed_date" context="{'group_by':'signed_date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="all_contract_tenders">
            <field name="name">Contrats des appels d'offres</field>
            <field name="res_model">tender.contract</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_sale_contract_tenders_filter"/>
            <field name="domain">[('contract_type','in',['ao_sale','ao_mad'])]</field>
        </record>

        <record id="view_tree_AO" model="ir.actions.act_window.view">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_view_contract_tender"/>
            <field name="act_window_id" ref="all_contract_tenders"/>
        </record>
        <record id="view_form_AO" model="ir.actions.act_window.view">
            <field name="sequence" eval="1"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="form_view_contract_tender"/>
            <field name="act_window_id" ref="all_contract_tenders"/>
        </record>

        <menuitem id="sale_menu_contract_tenders"
                  name="Conventions"
                  parent="sties_sub_menu_root"
                  sequence="2"/>
        <menuitem
                id="menu_sale_contract_tenders"
                name="Contrats AO"
                parent="sale_menu_contract_tenders"
                sequence="1"
                action="all_contract_tenders"/>

        <record model="ir.actions.act_window" id="all_contract_tenders_consultation">
            <field name="name">Commandes des consultationss</field>
            <field name="res_model">tender.contract</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_sale_contract_tenders_filter"/>
            <field name="domain">[('contract_type','in',['consultation'])]</field>
        </record>

        <menuitem
                id="menu_sale_contract_tenders_consultation"
                name="Commandes des consultations"
                parent="sale_menu_contract_tenders"
                sequence="2"
                action="all_contract_tenders_consultation"/>

    </data>
</odoo> 